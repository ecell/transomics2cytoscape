---
title: "transomics2cytoscape"
author: "by Kozo Nishida, Katsuyuki Yugi"
date: "10 July 2020"
package: transomics2cytoscape
output: BiocStyle::html_document
bibliography: references.bib
csl: biometrics.csl
vignette: |
    %\VignetteIndexEntry{transomics2cytoscape}
    %\VignetteEncoding{UTF-8}
    %\VignetteEngine{knitr::rmarkdown}
---

```{r, echo = FALSE}
knitr::opts_chunk$set(
    eval=FALSE
)
```

# Version Information

**R version**: 4.0.2

**Bioconductor version**: 3.11

**Cytoscape**: 3.8.0

**Cy3D (Cytoscape app)**: 1.1.2

**KEGGscape (Cytoscape app)**: 0.8.2

# Introduction

Visualization of trans-omic networks helps biological interpretation by
illustrating pathways where the signals are transmitted
[@gehlenborg_visualization_2010].

To characterize signals that go across multiple omic layers, Yugi and
colleagues have proposed a method for network visualization
[@yugi_reconstruction_2014] by stacking multiple 2D pathways in a 3D space.

The 3D network visualization was realized by VANTED [@rohn_vanted_2012].
However, the visualization relies on time-consuming manual operation.
Here we propose transomics2cytoscape, an R package that automatically creates
3D network visualization in combination with
Cytoscape [@shannon_cytoscape:_2003],
[Cy3D](http://apps.cytoscape.org/apps/cy3d) App, and
Cytoscape Automation [@otasek_cytoscape_2019].


## Installation

This package requires [Cytoscape](https://cytoscape.org/) to be installed and
You need to run Cytoscape before running the following R code.

```{r}
devtools::install_github("ecell/transomics2cytoscape", build_vignettes = TRUE)
```

# Workflow

There is a function `create3Dnetwork` in transomics2cytoscape.
In the ``create3Dnetwork`, the following workflow is executed.

![workflow_diagram](../man/figures/workflow_diagram.jpg)

This function takes the following 3 input files and visualizes a 3D network
in Cytoscape.

## Input files

### 1. A TSV file of network layers

A file that defines multiple networks to be layered in 3D space.
The format is as follows.

```
layer1  rno04910    600
layer2  galFiltered.sif 400
layer3  rno00010    200
layer4  rno00010    1
```

The first column is the network layer ID,
the second column is the KEGG pathway ID or an arbitrary network file,
and the last column is the Z height of the network.

### 2. A TSV file of trans-omic network edges between the network layers

A file that defines trans-omic interactions
(i.e., the edges that connect the different network layers).
The format is as follows.

```
layer1  rno:84006   layer2  YMR300C transomicsType1
layer2  YMR300C layer3  rno:100364062   transomicsType2
layer3  rno:100364062   layer4  rno:100364062   transomicsType3
```

The 1st and 2nd columns are the information about source node of
the trans-omic interaction.
The 3rd and 4th columns are about the target node.
The 2nd and 4th columns are the id of KEGG object or the name of
a node in an arbitrary network file.
The last column is the type of the trans-omic interaction.

### 3. A style file of Cytoscape

A Cytoscape style file.
For more information about Cytoscape style file, see the
[Cytoscape user manual](http://manual.cytoscape.org/en/stable/Styles.html).
Note that you can only use style properties that are supported by Cy3D.

## Example

```{r setup}
# suppressPackageStartupMessages(library(dplyr))
# suppressPackageStartupMessages(library(RCy3))
# suppressPackageStartupMessages(library(KEGGREST))
# Sys.setenv(LANGUAGE="en_US.UTF-8") 
library(transomics2cytoscape)
sif <- system.file("extdata","galFiltered.sif",package="RCy3")
file.copy(sif, ".")
networkLayers <- system.file("extdata", "networkLayers.tsv",
    package = "transomics2cytoscape")
transomicEdges <- system.file("extdata", "transomicEdges.tsv",
    package = "transomics2cytoscape")
stylexml <- system.file("extdata", "transomics.xml",
    package = "transomics2cytoscape")
create3Dnetwork(networkLayers, transomicEdges, stylexml)
```

Then, you should have a 3D view with layered networks and transomic
interactions between them.
(Note that you need to perform operations such as zooming out or adjusting the
camera angle.)

![4layers](../man/figures/4layers.jpg)


## Session information {.unnumbered}

```{r sessionInfo, echo=FALSE}
sessionInfo()
```

# References
